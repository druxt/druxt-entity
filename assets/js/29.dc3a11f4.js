(window.webpackJsonp=window.webpackJsonp||[]).push([[29],{310:function(e,t,r){"use strict";r.r(t);var n=r(67),i=r(31),a=r(321),s=r(300),u=r(44),c=(r(91),r(94),r(27),r(61),r(152),r(317),r(305),r(318)),o=r.n(c),d=r(319),p=r(307),f=r(303),l={name:"DruxtEntity",extends:p.c,props:{mode:{type:String,default:"default"},type:{type:String,required:!0},uuid:{type:String,required:!0}},fetch:function(){var e=this;return Object(u.a)(regeneratorRuntime.mark((function t(){var r,n,i,a;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.getSchema({resourceType:e.type,mode:e.mode});case 2:return e.schema=t.sent,r=e.getModuleComponents(),n={is:((r.filter((function(e){return e.global}))||[])[0]||{}).name||"DruxtWrapper",options:r.map((function(e){return e.name}))||[]},t.next=7,e.getWrapperData(n.is);case 7:return i=t.sent,n.settings=o()((e.$druxtEntity||{}).options||{},i.druxt||{},{arrayMerge:function(e,t){return t}}),a=e.getQuery(n.settings),t.next=12,e.getResource({type:e.type,id:e.uuid,query:a});case 12:e.entity=t.sent.data,e.fields=e.getFields(),n=Object(s.a)(Object(s.a)({},n),e.getModulePropsData(i.props)),e.component=n;case 16:case"end":return t.stop()}}),t)})))()},data:function(){return{entity:{},fields:{},schema:{}}},druxt:{componentOptions:function(e){var t=e.schema;return[[t.resourceType,t.config.mode],[t.resourceType],[t.config.mode]]},propsData:function(e){return{entity:e.entity,fields:e.fields,schema:e.schema}}},methods:Object(s.a)({getFields:function(){if(!this.entity||!this.schema)return!1;var e,t=Object(s.a)(Object(s.a)({},this.entity.attributes||{}),this.entity.relationships||{}),r={},n=Object(a.a)(this.schema.fields);try{for(n.s();!(e=n.n()).done;){var i=e.value;this.isEmpty(t[i.id])||(r[i.id]={id:i.id,data:t[i.id],schema:i,relationship:!!(this.entity.relationships||{})[i.id]})}}catch(e){n.e(e)}finally{n.f()}return r},getQuery:function(e){var t=new d.DrupalJsonApiParams,r=(e.query||{}).schema?[].concat(Object(i.a)(this.schema.fields.map((function(e){return e.id}))),Object(i.a)((e.query||{}).fields||[])):(e.query||{}).fields||[];return!!r.length&&(t.addFields(this.type,r),t)},getScopedSlots:function(){var e=this,t={};return Object.entries(this.fields).map((function(r){var i=Object(n.a)(r,2),a=i[0],s=i[1];t[a]=function(t){return e.$createElement("DruxtField",{attrs:t,props:s})}})),t.default=function(r){return Object.entries(e.fields).map((function(e){var i=Object(n.a)(e,1)[0];return t[i](r)}))},t},isEmpty:function(e){return void 0===e||(!e||(!(!Array.isArray(e.data)||e.data.length)||void 0!==e.data&&!e.data))}},Object(f.a)({getResource:"druxt/getResource",getSchema:"druxtSchema/get"}))},m=r(42),h=Object(m.a)(l,void 0,void 0,!1,null,null,null);t.default=h.exports}}]);