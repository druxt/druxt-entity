(window.webpackJsonp=window.webpackJsonp||[]).push([[33],{311:function(e,t,r){"use strict";r.r(t);var n=r(65),a=r(28),i=r(316),s=r(300),o=r(45),u=(r(92),r(95),r(27),r(62),r(154),r(153),r(312),r(308),r(313)),c=r.n(u),d=r(314),p=r(310),l=r(307),f={name:"DruxtEntity",extends:p.c,props:{mode:{type:String,default:"default"},type:{type:String,required:!0},uuid:{type:[Boolean,String],default:!1},schemaType:{type:String,default:void 0}},fetch:function(){var e=this;return Object(o.a)(regeneratorRuntime.mark((function t(){var r,n,a,i;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.getSchema({resourceType:e.type,mode:e.mode,schemaType:e.schemaType||"view"});case 2:return e.schema=t.sent,r=e.getModuleComponents(),n={is:((r.filter((function(e){return e.global}))||[])[0]||{}).name||"DruxtWrapper",options:r.map((function(e){return e.name}))||[]},t.next=7,e.getWrapperData(n.is);case 7:if(a=t.sent,n.settings=c()((e.$druxtEntity||{}).options||{},a.druxt||{},{arrayMerge:function(e,t){return t}}),!e.uuid){t.next=15;break}return i=e.getQuery(n.settings),t.next=13,e.getResource({type:e.type,id:e.uuid,query:i});case 13:e.entity=t.sent.data,e.model=JSON.parse(JSON.stringify(e.entity||{}));case 15:n=Object(s.a)(Object(s.a)({},n),e.getModulePropsData(a.props)),e.component=n;case 17:case"end":return t.stop()}}),t)})))()},data:function(e){var t=e.type,r=e.value;return{entity:Object(s.a)({attributes:{},relationships:{},type:t},r),model:Object(s.a)({attributes:{},relationships:{},type:t},r),schema:null}},computed:{fields:function(){var e=this;if(!this.schema)return!1;var t,r=Object(s.a)(Object(s.a)({},this.model.attributes||{}),this.model.relationships||{}),n={},a=Object(i.a)(this.schema.fields);try{var o=function(){var a=t.value;if("form"!==e.schemaType&&e.isEmpty(r[a.id]))return"continue";n[a.id]={id:a.id,data:r[a.id],errors:(e.errors||[]).filter((function(e){return((e.source||{}).pointer||"").startsWith("/data/attributes/".concat(a.id))})),relationship:!!((a.settings||{}).storage||{}).target_type||!!(e.model.relationships||{})[a.id],schema:Object(s.a)({config:e.schema.config},a),value:r[a.id]}};for(a.s();!(t=a.n()).done;)o()}catch(e){a.e(e)}finally{a.f()}return n}},methods:Object(s.a)({getQuery:function(e){var t=new d.DrupalJsonApiParams,r=(e.query||{}).schema?[].concat(Object(a.a)(this.schema.fields.map((function(e){return e.id}))),Object(a.a)((e.query||{}).fields||[])):(e.query||{}).fields||[];return!!r.length&&(t.addFields(this.type,r),t)},getScopedSlots:function(){var e=this,t={};return Object.entries(this.fields).map((function(r){var a=Object(n.a)(r,2),i=a[0],s=a[1];t[i]=function(t){return e.$createElement("DruxtField",{attrs:t,key:i,props:s,on:{input:function(t){var r=s.relationship?"relationships":"attributes";e.model[r][i]=t,e.$emit("input",e.model)}},ref:i})}})),t.default=function(r){return Object.entries(e.fields).map((function(e){var a=Object(n.a)(e,1)[0];return t[a](r)}))},t},isEmpty:function(e){return void 0===e||(!e||(!(!Array.isArray(e.data)||e.data.length)||void 0!==e.data&&!e.data))}},Object(l.a)({getResource:"druxt/getResource",getSchema:"druxtSchema/get"})),druxt:{componentOptions:function(e){var t=e.schema;return[[t.resourceType,t.config.mode,t.config.schemaType],[t.config.mode]]},propsData:function(e){var t=e.entity,r=e.fields,n=e.model;return{entity:t,fields:r,schema:e.schema,value:n}}}},m=r(42),h=Object(m.a)(f,void 0,void 0,!1,null,null,null);t.default=h.exports}}]);